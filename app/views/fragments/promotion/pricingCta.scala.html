@import com.gu.memsub.promo.PromoCode
@import com.gu.memsub.promo.Promotion.AnyPromotion
@import com.gu.subscriptions.DigipackCatalog
@import model.DigitalEdition

@(edition: DigitalEdition, catalog: DigipackCatalog, promoCode: PromoCode, promotion: AnyPromotion)

@formattedPrice = {
    @{
        promotion.whenPercentDiscount.fold {
            catalog.digipackMonthly.priceGBP.pretty
        } {
            discountPromotion => catalog.digipackMonthly.priceGBP.*(1 - (discountPromotion.promotionType.amount.toFloat / 100f)).pretty
        }
    }
}

<div class="pricing-cta">
    <div class="pricing-cta__pricing">
        <h4 class="pricing-cta__pricing__title">Free for 14 days</h4>
        <p class="pricing-cta__pricing__value">Then @formattedPrice/month</p>
    </div>
</div>
