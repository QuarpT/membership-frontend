/* ==========================================================================
   Forms - Custom Select
   @see https://github.com/filamentgroup/select-css
   ========================================================================== */

/**
 * Container used for styling the custom select,
 */
.custom-select {
    position: relative;
    display: block;
    padding: 0;
    margin-bottom: $gs-baseline * 2;
}

/**
 * This is the native select,
 * we're making everything but the text invisible
 * so we can see the button styles in the wrapper
 *
 * [1] Font size must be 16px or larger to prevent iOS page zoom on focus
 */
.custom-select select {
    @include f-textSans();
    font-size: 1em; // [1]
    line-height: inherit;
    color: inherit;
    margin: 0;
    width: 100%;
    outline: none;
    box-sizing: border-box;
    -webkit-appearance: none;
    appearance: none;
    padding: ($gs-baseline / 2) $gs-baseline;
    border: 1px solid $c-border;
    border-radius: 20px;
    background-color: $c-white;

}

/**
 * Custom select arrow
 * [1] Offset by 1/2 of the icon height to center
 * [2] This hack make the select behind the arrow clickable in some browsers
 */
.custom-select::after {
    content: "";
    position: absolute;
    z-index: 2;
    top: 50%;
    right: $gs-gutter;
    height: 14px;
    width: 7px;
    margin-top: -7px; // [1]
    background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iN3B4IiBoZWlnaHQ9IjE0LjAyN3B4IiB2aWV3Qm94PSIwIDAgNyAxNC4wMjciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDcgMTQuMDI3IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGZpbGw9IiMzMDMwMzAiIGQ9Ik02LjQ1MSwxMC4xODRMNC4xNDUsMTEuOTRWOC4yOWgtMS4yOXYzLjY1bC0yLjMwNi0xLjc1N0wwLDEwLjc2MWwzLjI3NiwzLjI2N2gwLjQ0OEw3LDEwLjc2MUw2LjQ1MSwxMC4xODR6DQoJIE0yLjg1NSwyLjA1OXYzLjY3OGgxLjI5VjIuMDU5bDIuMzA3LDEuNzU3TDcsMy4yNjdMMy43MjQsMEgzLjI3NkwwLDMuMjY3bDAuNTQ5LDAuNTQ5TDIuODU1LDIuMDU5eiIvPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPC9zdmc+DQo=);
    background-repeat: no-repeat;
    background-size: 100%;
    pointer-events: none; // [2]
}

/**
 * Hover styles
 */
.custom-select:hover select {
    border: 1px solid $c-neutral3;
}

/**
 * Focus styles
 */
.custom-select select:focus {
    outline: none;
    box-shadow: 0 0 1px 2px rgba(180, 222, 250, 1);
    color: $c-neutral1;
    border: 1px solid $c-neutral3;
}

/**
 * Set options to normal weight
 */
.custom-select option {
    font-weight: normal;
}

/* ------------------------------------  */
/* START OF UGLY BROWSER-SPECIFIC HACKS */
/* ----------------------------------  */

/**
 * OPERA - Pre-Blink nix the custom arrow, go with a native select button to keep it simple.
 * Targeted via this hack http://browserhacks.com/#hack-a3f166304aafed524566bc6814e1d5c7
 */
x:-o-prefocus, .custom-select::after {
    display:none;
}

/**
 * IE 10/11+
 * This hides native dropdown button arrow so it will have the custom appearance,
 * IE 9 and earlier get a native select - targeting media query hack via
 * http://browserhacks.com/#hack-28f493d247a12ab654f6c3637f6978d5
 *
 * The second rule removes the odd blue bg color behind the text in the select button in
 * IE 10/11 and sets the text color to match the focus style's fix via
 * http://stackoverflow.com/questions/17553300/change-ie-background-color-on-unopened-focused-select-box
 */
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
  .custom-select select::-ms-expand {
    display: none;
  }
  .custom-select select:focus::-ms-value {
    background: transparent;
    color: $c-neutral1;
  }
}

/**
 * FIREFOX won't let us hide the native select arrow, so we have to make it wider than needed and clip it via overflow on the parent container.
 * The percentage width is a fallback since FF 4+ supports calc() so we can just add a fixed amount of extra width to push the native arrow out of view.
 * We're applying this hack across all FF versions because all the previous hacks were too fragile and complex.
 * You might want to consider not using this hack and using the native select arrow in FF.
 * Note this makes the menus wider than the select button because they display at the specified width and aren't clipped.
 * Targeting hack via http://browserhacks.com/#hack-758bff81c5c32351b02e10480b5ed48e
 *
 * Show only the native arrow
 */
@-moz-document url-prefix() {
    .custom-select {
        overflow: hidden;
    }
    .custom-select select {
        width: 120%;
        width: -moz-calc(100% + 3em);
        width: calc(100% + em);
    }
}

/**
 * Firefox focus has odd artifacts around the text, this kills that.
 * See https://developer.mozilla.org/en-US/docs/Web/CSS/:-moz-focusring
 */
.custom-select select:-moz-focusring {
    color: transparent;
    text-shadow: 0 0 0 #000;
}

/* ------------------------------------  */
/*  END OF UGLY BROWSER-SPECIFIC HACKS  */
/* ------------------------------------  */
